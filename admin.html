<!DOCTYPE html>
<html>
<head>
<title>Stall Admin</title>
<style>
body{font-family:Arial;text-align:center}
table{margin:auto;border-collapse:collapse}
td,th{border:1px solid #000;padding:6px}
button{padding:5px}
</style>
</head>
<body>

<h2>üîê Stall Login</h2>
<input id="stall" placeholder="Stall Name"><br><br>
<input id="pass" type="password" placeholder="Password"><br><br>
<button onclick="login()">Login</button>

<table id="tbl" style="display:none">
<tr>
<th>Token</th><th>Name</th><th>Items</th>
<th>Status</th><th>Action</th>
</tr>
</table>

<script>
const creds={
"Veg Meals":"veg123",
"Non Veg Meals":"nonveg123",
"Biryani":"biryani123",
"Ice Cream":"ice123",
"Drinks":"drink123",
"Starters":"start123"
};

function login(){
if(creds[stall.value]===pass.value){
sessionStorage.setItem("stall",stall.value);
tbl.style.display="table";
show();
}else alert("Invalid Login");
}

function show(){
let s=sessionStorage.getItem("stall");
let orders=JSON.parse(localStorage.getItem("orders")||"[]");
tbl.innerHTML=tbl.rows[0].outerHTML;

orders.filter(o=>o.stall===s).forEach(o=>{
tbl.innerHTML+=`
<tr>
<td>${o.token}</td>
<td>${o.name}</td>
<td>${o.items.map(i=>i.name).join(",")}</td>
<td>${o.status}</td>
<td>
${o.status==="Preparing"?
`<button onclick="update(${o.token},'Ready')">READY</button>`:
o.status==="Ready"?
`<button onclick="update(${o.token},'Taken')">TAKEN</button>`:
"‚úî"}
</td>
</tr>`;
});
}

function update(t,s){
let orders=JSON.parse(localStorage.getItem("orders"));
orders.forEach(o=>{if(o.token===t)o.status=s});
localStorage.setItem("orders",JSON.stringify(orders));
show();
}

setInterval(show,5000);
</script>
</body>
</html>
