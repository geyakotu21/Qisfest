<!DOCTYPE html>
<html>
<head>
<title>Admin Panel - QIS Fest</title>
<style>
body{font-family:Arial;background:#f4f4f4;padding:20px;}
h1{color:#ff5722;}
input,button{padding:10px;margin:5px;}
button{background:#ff5722;color:white;border:none;cursor:pointer;}
table{width:100%;border-collapse:collapse;background:white;margin-top:20px;}
th,td{border:1px solid #ccc;padding:8px;text-align:center;}
.hidden{display:none;}
</style>
</head>
<body>

<h1>üîê Admin Login</h1>

<div id="loginBox">
    <input id="adminUser" placeholder="Username"><br>
    <input id="adminPass" type="password" placeholder="Password"><br>
    <button onclick="adminLogin()">Login</button>
</div>

<div id="adminPanel" class="hidden">
    <h1>üìã Orders Dashboard</h1>
    <button onclick="logout()">Logout</button>
    <table>
        <thead>
            <tr>
                <th>Name</th>
                <th>Phone</th>
                <th>Stall</th>
                <th>Items</th>
                <th>Total</th>
                <th>Pickup</th>
                <th>Status</th>
            </tr>
        </thead>
        <tbody id="ordersTable"></tbody>
    </table>
</div>

<script>
const ADMIN_USER = "admin";
const ADMIN_PASS = "1234";

function adminLogin(){
    let u = adminUser.value;
    let p = adminPass.value;

    if(u===ADMIN_USER && p===ADMIN_PASS){
        sessionStorage.setItem("admin","yes");
        loginBox.classList.add("hidden");
        adminPanel.classList.remove("hidden");
        loadOrders();
    } else {
        alert("Invalid Admin Credentials");
    }
}

function loadOrders(){
    let orders = JSON.parse(localStorage.getItem("orders")||"[]");
    let table = document.getElementById("ordersTable");
    table.innerHTML = "";

    orders.forEach(o=>{
        table.innerHTML += `
        <tr>
            <td>${o.name}</td>
            <td>${o.phone}</td>
            <td>${o.stall}</td>
            <td>${o.items.map(i=>i.name).join(", ")}</td>
            <td>‚Çπ${o.total}</td>
            <td>${o.pickupTime}</td>
            <td>${o.status}</td>
        </tr>`;
    });
}

function logout(){
    sessionStorage.removeItem("admin");
    location.reload();
}

if(sessionStorage.getItem("admin")==="yes"){
    loginBox.classList.add("hidden");
    adminPanel.classList.remove("hidden");
    loadOrders();
}
</script>

</body>
</html>
